<!DOCTYPE HTML>
<html ng-app="myApp">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data:; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <script src="components/loader.js"></script>
    <script type="text/javascript" src="javascripts/jquery.xdomainajax.js"></script>
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="css/style.css">
    <script>
        var app = angular.module('myApp', ['onsen']);
        
        // what u want? -> toppage.htmlのinputに入力された値をpwdとしてurlに投げ、取得したページをpage1.htmlに出す
        app.value('pwds', {
          'toppage' : 7462,
          'username': '',
          'userpwd': '',
          });
          
        app.value('urls', {
          'index' : 'https://library.rail-e.or.jp/e-library/Index',
          'login' : ''
        });
        
        //app.factory('HTTPRequestService', ['$http', '$httpParamSerializerJQLike', 
        //function($http, $httpParamSerializerJQLike){
        //  var httpRequestService = {};
          
        //  httpRequestService.getHtml = function(address, datas, callback){
        //    console.debug('request ' + address);
        //    $http({
        //      method : 'POST',
        //      headers : {
        //        'Content-Type' : 'application/x-www-form-urlencoded'
        //      },
        //      transformRequest : $httpParamSerializerJQLike,
        //      url : address,
        //      data : datas
        //    }).success(function(data, status, header, config){
        //      callback(data);
        //    });
        //  };
          
        //  return httpRequestService;
        //}]);
        
        app.controller('PageController', ['$scope', 'pwds', 'urls', 
          function($scope, pwds, urls){
            $scope.pwds = pwds;
            $scope.urls = urls;
            $scope.data = 'no name';
            
            $scope.firstLogin = function(){
              $(function () {
                  $.ajax({
                      url: "https://library.rail-e.or.jp/",
                      type: 'GET',
                      dataType: 'html'
                  }).fail(function(){
                    
                  })
                  .done(function (data) {
                      console.debug(JSON.stringify(data));
                      console.debug(JSON.stringify($(data.results[0]).find("*[name='top']")));
                  });
              });
              
              $scope.app.slidingMenu.setMainPage('page1.html');
            }
          }]);
    </script>
</head>
<body>
    <ons-sliding-menu var="app.slidingMenu" menu-page="menu.html" main-page="toppage.html" side="left" type="overlay" max-slide-distance="200px">
    </ons-sliding-menu>
</body>
</html>
